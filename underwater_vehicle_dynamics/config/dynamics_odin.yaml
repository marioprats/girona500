# Dynamics model parameters

vehicle_name: g500
g500/num_actuators: 5
dynamics/g500/period: 0.01
dynamics/g500/mass: 98.0
dynamics/g500/gravity_center: [0.0, 0.0, 0.05]
dynamics/g500/g: 9.81
dynamics/g500/radius: 0.286

dynamics/g500/ctf: 0.00006835
dynamics/g500/ctb: 0.00006835

#Actuator tau for first order actuator dynamic model
dynamics/g500/actuators_tau: [0.2, 0.2, 0.2, 0.2, 0.2] 
#Inputs higher than actuators_maxsat will saturate to actuators_maxsat
dynamics/g500/actuators_maxsat: [1, 1, 1, 1, 1]        
#Inputs below actuators_minsat will saturate to actuators_minsat
dynamics/g500/actuators_minsat: [-1, -1, -1, -1, -1] 
#Inputs to actuators will be scaled to actuators_gain,
dynamics/g500/actuators_gain: [1500, 1500, 1500, 1500, 1500] 

dynamics/g500/dzv: 0.05
dynamics/g500/dv: 0.35
dynamics/g500/dh: 0.4
dynamics/g500/density: 1000.0

dynamics/g500/tensor: [8.0, 0.0, 0.0, 0.0, 8.0, 0.0, 0.0, 0.0, 8.0]
dynamics/g500/damping: [.0, .0, .0, -130.0, -130.0, -130.0]
dynamics/g500/quadratic_damping: [-148.0, -148.0, -148.0, -180.0, -180.0, -180.0]

dynamics/g500/Mrb: [ 98.0,    0.0,    0.0,    0.0,    4.9,  -0.0, 
                     0.0,   98.0,    0.0,   -4.9,   0.0,    0.0, 
                     0.0,    0.0,   98.0,    0.0,   -0.0,    0.0, 
                     0.0,   -4.9,   0.0,    8.0,    0.0,    0.0, 
                     4.9,   0.0,   -0.0,    0.0,    8.0,    0.0, 
                     -0.0,    0.0,    0.0,    0.0,    0.0,    8.0 ]

dynamics/g500/Ma: [  49.0,    0.0,    0.0,    0.0,    0.0,   0.0, 
                     0.0,    49.0,    0.0,    0.0,    0.0,   0.0, 
                     0.0,    0.0,    49.0,    0.0,    0.0,   0.0, 
                     0.0,    0.0,    0.0,    0.0,    0.0,   0.0, 
                     0.0,    0.0,    0.0,    0.0,    0.0,   0.0, 
                     0.0,    0.0,    0.0,    0.0,    0.0,   0.0 ]

#G500 thrusters. 
#Expresion evaluated at each iteration by the python interpreter
#ct is a vector internally defined such that if u[i]>0 then ct[i]=ctf, else ct[i]=ctb, i>=0 and i<number_of_actuators
#du is the vector with the control inputs
#The rest of parameters defined in this file can be referenced here as "self.param", i.e /dynamics/dh maps to "self.dh"
dynamics/g500/allocation_matrix: "
[-ct[0]*abs(du[0]),            -ct[1]*abs(du[1]),              .0,                       .0,                           .0, 
.0,                             .0,                             .0,                       .0,                           ct[4]*abs(du[4]),
.0,                             .0,                             -ct[2]*abs(du[2]),          -ct[3]*abs(du[3]),            .0, 
.0,                             .0,                             .0,                       .0,                           .0, 
.0,                             .0,                             -ct[2]*self.dv*abs(du[2]), ct[3]*self.dv*abs(du[3]),     .0, 
-ct[0]*self.dh*abs(du[0]),      ct[1]*self.dh*abs(du[1]),       .0,                       .0,                           .0]"

#Meters and Rads [X, Y, Z, Roll, Pitch, Yaw]
dynamics/g500/initial_pose: [0.0, 0.0, 0.0, 0, 0, 1.57] #[3.0, 1.1, 2.8, 0, 0, 3.14]
dynamics/g500/initial_velocity: [0, 0, 0, 0, 0, 0]

dynamics/g500/topic_name: "/dataNavigator"
dynamics/g500/frame_id: "garbi_base_link"


#WATER CURRENTs SIMULATION
dynamics/current_mean: [0.05, 0, 0]
dynamics/current_sigma: [0.002, 0.001, 0.001]
dynamics/current_min: [0.0, 0.0, 0.0]
dynamics/current_max: [0.0, 0.0, 0.0]

# Sensors information
# Transformation wrt vehicle frame: [x, y, z, roll, pitch, yaw] (in meters and degrees!!!)
valeport_sound_velocity/tf: [0.0, 0.0, 0.2, 0.0, 0.0, 0.0]
tritech_igc_gyro/tf: [0.0, 0.0, 0.0, 0.0, 0.0, 180.0]
teledyne_explorer_dvl/tf: [-0.75, 0.0, 0.0, 0.0, 0.0, 225.0] 

# Sensors publication periods
valeport_sound_velocity/period: 0.2
tritech_igc_gyro/period: 0.05
teledyne_explorer_dvl/period: 0.2
uwsim/period: 0.1
gps/period: 1.0

# Sensors covariances
tritech_igc_gyro/orientation_covariance: [0.00000001, 0.000000001, 0.000000001]
valeport_sound_velocity/pressure_covariance: 0.02
teledyne_explorer_dvl/velocity_covariance: [0.0015, 0.0015, 0.0015] #wrt bottom, wrt water probably bigger!
gps/position_covariance: [0.00005, 0.00005] #Not computed!!!

